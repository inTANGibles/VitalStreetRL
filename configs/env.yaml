# 环境配置
env:
  # 观测表示（RL观测：仅支持Raster，由CNN处理）
  representation:
    type: "raster"  # 仅支持raster观测
    raster:
      resolution: [144, 256]  # (H, W)
      channels:
        - "walkable_mask"      # 通道1: 可走区域（白=可走）
        - "predicted_flow"      # 通道2: 预测流量热力图（百分位数归一化）
        - "landuse_id"          # 通道3: 土地利用分布（8个灰度类别）
  
  # STGNN图构建配置（用于人流预测，不用于RL观测）
  stgnn_graph:
    node_feature_dim: 32
    edge_feature_dim: 16
    use_spatial_edges: true  # 使用空间相邻关系作为边
    use_street_edges: true   # 使用街道网络作为边
  
  # 动作空间（根据ActionSpace定义）
  action_space:
    max_shops: 80              # 最大shop数量
    max_business_types: 8       # 最大业态类型数量（固定为8，对应BusinessCategory的8个枚举值）
    max_public_spaces: 100       # 最大公共空间数量
    max_public_space_nodes: 500  # 最大public_space节点数量
    max_total_units: 120       # 所有单元的最大数量（用于action[1]维度，会自动从geojson文件检测并覆盖）
  
  # 初始状态
  initial_state:
    geojson_path: "data/0123_2.geojson"  # 初始状态的GeoJSON文件路径
  
  # 约束
  constraints:
    min_street_width: 3.0
    protected_zones: []  # 保护区域列表
    max_budget: 1000000.0
  
  # 终止条件
  termination:
    max_steps: 20  # 超过20步就停止
    stagnation_threshold: 10
    violation_threshold: 100.0
  
  # 状态转移配置
  transition:
    # 动作成本
    cost:
      change_business: 3000.0
      shop_to_public_space: 2000.0
      atrium_to_public_space: 3000.0
      close_public_space: 1000.0
    # flow计算参数（用于convert_to_public_space后更新flow）
    flow:
      buffer_distance: 10.0  # buffer距离（米）
      diversity_weight: 0.5  # 多样性权重
      weighted_sum_weight: 0.5  # 加权总和权重
